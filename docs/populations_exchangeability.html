<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ADA511: Data science and data-driven engineering - 16&nbsp; Populations &amp; exchangeability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./making_decisions.html" rel="next">
<link href="./statistics.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="ada511styles.css">
</head>

<body class="nav-sidebar docked slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./populations_exchangeability.html">Population inference</a></li><li class="breadcrumb-item"><a href="./populations_exchangeability.html"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Populations &amp; exchangeability</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./ada511logo8_small.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">ADA511: <br>Data science and data-driven engineering</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">An invitation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Accept or discard?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./framework.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Framework</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic_decisions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Basic decision problems</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">What is an inference?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sentences.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Sentences</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./truth_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Truth inference</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Probability inference</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Probability distributions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./joint_probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Joint probability distributions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./marginal_conditional_probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Marginal and conditional probabilities</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference_exchangeability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">The most general inference problem</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Information and data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quantities_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Quantities and data types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_types_multi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Joint quantities and complex data types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./variates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Populations and variates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Statistics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Population inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./populations_exchangeability.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Populations &amp; exchangeability</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Decision theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./making_decisions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Making decisions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-exchangeability" id="toc-sec-exchangeability" class="nav-link active" data-scroll-target="#sec-exchangeability"><span class="header-section-number">16.1</span> Exchangeable vs non-exchangeable inferences</a>
  <ul class="collapse">
  <li><a href="#intuitive-understanding" id="toc-intuitive-understanding" class="nav-link" data-scroll-target="#intuitive-understanding">Intuitive understanding</a></li>
  <li><a href="#formal-definition" id="toc-formal-definition" class="nav-link" data-scroll-target="#formal-definition">Formal definition</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Populations &amp; exchangeability</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="hidden">
<!-- \renewcommand*{\prq}[1]{\textsf{\small #1}} -->
<!-- \definecolor{lightblue}{HTML}{66CCEE} -->
<!-- \sethlcolor{lightblue} -->
<!-- \providecommand*{\moo}[1][=]{\mathord{\mkern1.5mu#1\mkern1.5mu}} -->
<!-- \providecommand*{\mo}[1][=]{\mathrel{\mkern-4mu#1\mkern-4mu}} -->
<!-- \providecommand*{\mo}[1][\textrm{\small=}]{\mathrel{\mkern-4mu#1\mkern-4mu}} -->
</div>
<div class="hidden">
<!-- \providecommand*{\ya}{a} -->
<!-- \providecommand*{\yb}{b} -->
<!-- \providecommand*{\yc}{b} -->
</div>
<p>To solve <em>any</em> inference problem, or to design an AI agent for solving an inference problem, all we have to do in principle is to repeatedly use the <a href="probability_inference.html#sec-fundamental">fundamental laws of inference of §&nbsp;<span>7.4</span></a>.</p>
<p>In many cases an in-principle application of the inference laws is computationally impossible, however. Approximate calculations and premises are then used, sometimes quite drastic. The approximation used depends on the nature of the inference problem. This is why inference problems are often classified in one way or another, and different solution recipes are presented for the different classes.</p>
<p>For a data-science engineer it is important to keep in mind that these recipes are only approximations, and to keep the principled solution always in sight. Technological advances continually allow us to make computations that were previously impossible – think of “quantum computers” these days. A truly optimal in-principle solution, preferable to a sub-optimal approximation, can suddenly become accessible – to those who know it.</p>
<p><br>
</p>
<p>We shall now introduce a very rough distinction between two very broad classes of inference problems, and then study the principled solution of one of them, and approximations to this solution.</p>
<section id="sec-exchangeability" class="level2 page-columns page-full" data-number="16.1">
<h2 data-number="16.1" class="anchored" data-anchor-id="sec-exchangeability"><span class="header-section-number">16.1</span> Exchangeable vs non-exchangeable inferences</h2>
<section id="intuitive-understanding" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="intuitive-understanding">Intuitive understanding</h3>
<p>Consider these sketches of two inference problems:</p>
<ul>
<li><dl>
<dt><a href="https://www.britannica.com/money/topic/stock-exchange-finance">Stock exchange</a></dt>
<dd>
In 100 days, the daily change in <a href="https://www.investor.gov/introduction-investing/investing-basics/glossary/closing-price">closing price</a> of a stock has been <span class="green">positive 74 times, and negative 26 times</span>, according a particular sequence. For instance, the data could be:
</dd>
</dl>
<p><img src="stock.png" class="img-fluid" style="width:100.0%"></p>
<p>In which of the subsequent 3 days will the closing-price change be positive, and in which negative?</p></li>
</ul>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="stock_course.jpg" class="img-fluid" style="width:100.0%"></p>
</div></div><p><br>
</p>
<ul>
<li><dl>
<dt>Mars <a href="https://www.britannica.com/technology/prospecting-mining">prospecting</a></dt>
<dd>
Of the last 100 similar-sized rocks examined in a large crater on Mars, <span class="green">74 contained <a href="https://science.nasa.gov/science-news/science-at-nasa/2001/ast28mar_1">hematite</a>, and 26 didn’t</span>. For instance, the data could be:
</dd>
</dl>
<p><img src="rock.png" class="img-fluid" style="width:100.0%"></p>
<p>where “Y” and “N” denote the presence and absence of hematite.</p>
<p>Which, among the next 3 rocks that will be examined, will contain hematite, and which will be hematite-free?</p></li>
</ul>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="mars_crater2.jpg" class="img-fluid" style="width:100.0%"></p>
</div></div><div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa-solid fa-user-edit" aria-label="user-edit"></i> Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Discuss:</p>
<ul>
<li><p>Which of the two inferences above seems more difficult?…</p></li>
<li><p>…Why? Speculate on which factors make one inference more difficult than the other.</p></li>
<li><p>Which differences and similarities do you find between the two inferences?</p></li>
<li><p>Which additional information could be important for drawing more precise inferences?</p></li>
<li><p>Which type of quantities appear in the two inferences?</p></li>
</ul>
<!-- - Answer the same questions, considering two inference problems that are similar but "backwards in time": -->
<!--     1b. Assessing the value that a particular investment fund had in 3750 days ago, given the course of that fund in the past 3650 days. -->
<!--     2b. Assessing the failure status of the past 1100th electronic component from an assembly line, given the failure status of the last 1000 electronic components already out of the same assembly line. -->
</div>
</div>
<p><br>
</p>
<p>The two inference problems differ in some aspects and are similar in others. Time, for example, appears to be an important aspect of the first inference, which is in fact often categorized as a “<a href="https://www.abs.gov.au/statistics/understanding-statistics/statistical-terms-and-concepts/time-series-data">time-series analysis</a>”. But the second inference involves or could involve time as well: the rocks could be inspected sequentially. So more precisely it is the time <em>ordering</em> that is more relevant in the first inference than the second.</p>
<p>An important difference between the two inference problems is revealed by the following thought-experiments. Consider how you would answer in the stock-exchange case and in the Mars-prospecting case:</p>
<ol type="a">
<li><p><em>It turns out that there was an error in the sequence of positive and negative datapoints, although not in the total amounts of positive and negative ones.</em> In the stock-exchange inference, for instance, days 1 (<span style="display:inline-block;"><span class="math inline">\(-\)</span>)</span> and 3 (<span style="display:inline-block;"><span class="math inline">\(+\)</span>)</span> were erroneously swapped, as were days 100 (<span style="display:inline-block;"><span class="math inline">\(+\)</span>)</span> and 85 (<span style="display:inline-block;"><span class="math inline">\(-\)</span>),</span> and many other days; in the Mars-prospecting inference, rocks #1 (Y) and #3 (N) were erroneously swapped, as were rocks #100 (Y) and #97 (N), and many other rocks.</p>
<p>Should the final inference about the next 3 datapoints be changed?</p></li>
<li><p><em>The information about the exact sequence of data is lost, and only the total amount of positive and negative datapoints is preserved</em> (74 vs 26).</p>
<p>Would the final inference about the next 3 datapoints be different, compared to the situation where the exact data sequence is known?</p></li>
<li><p><em>A new inference is requested: not about the 3 datapoints following the known data, but the 3 datapoints preceding the known data</em>: the day before day 1 and so on, or the rock before rock #1 and so on. (Or, generalizing: an inference about 3 datapoints <em>interspersed</em> among the known ones is requested.)</p>
<p>Would the inference for the preceding 3 datapoints be different from the original one about the subsequent 3 datapoints?</p></li>
</ol>
<p>In all these thought-experiments, our intuition is that the inference for the stock-exchange problem would be different, but the one for the Mars-prospecting problem would stay the same or not change appreciably. Swapping days in a stock course, matters; swapping rocks in a crater, doesn’t. There are good reasons, based on physics and dynamical-system theory, for this intuition.</p>
<p>An inference which does not change if data and unknown quantities are freely reordered, like the Mars-prospecting one, is called <span class="blue"><strong>exchangeable</strong></span>. Whereas an inference in which the ordering of data and unknowns is relevant, like the stock-exchange one, is called <strong>non-exchangeable</strong>. There is not a dichotomy between the two cases; rather, there are continuous varying degrees of exchangeability or non-exchangeability. But for the moment we shall simplify this gradation into a binary distinction.</p>
<p>We shall now make this definition more precise, and then study and exploit the remarkable consequences that it has for an agent’s inferences and probability calculations.</p>
</section>
<section id="formal-definition" class="level3">
<h3 class="anchored" data-anchor-id="formal-definition">Formal definition</h3>
<p>Consider a collection of quantities <span style="display:inline-block;"><span class="math inline">\(X_1, X_2, X_3, \dotsc\)</span>$,</span> all having identical domains. For instance, they could all be continuous with values in the real numbers; or all binary, with values <span style="display:inline-block;"><span class="math inline">\(\{\text{\small Yes}, \text{\small No}\}\)</span>;</span> or all ordinal, with values <span style="display:inline-block;"><span class="math inline">\(\{\text{\small low}, \text{\small medium}, \text{\small high}\}\)</span>;</span> or all join quantities, with the same join domains.</p>
<p>An agent has a joint probability distribution over them, conditional on some state of knowledge <span style="display:inline-block;"><span class="math inline">\(\mathsfit{I}\)</span>:</span></p>
<p><span class="math display">\[
\mathrm{P}(X_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}x_1,\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}x_2,\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}x_3,\ \dotso \nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\]</span></p>
<p>for all combinations of values <span style="display:inline-block;"><span class="math inline">\(x_1, x_2, x_3, \dotsc\)</span></span></p>
<p>This joint probability distribution is called <span class="blue"><strong>exchangeable</strong></span> if <span class="blue"><em>all marginal probabilities (<a href="marginal_conditional_probability.html#sec-marginal-probs">§&nbsp;<span>10.1</span></a>) for any sub-collection of quantities remain the same whenever the values are swapped</em></span>. For example:</p>
<p><span class="math display">\[
\begin{aligned}
&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\end{aligned}
\qquad\text{\small and}\qquad
\begin{aligned}
&amp;
\mathrm{P}(X_5 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_{11}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{170,51,119}d}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_5 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{170,51,119}d},\ X_{11}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\end{aligned}
\]</span></p>
<p>and also</p>
<p><span class="math display">\[
\begin{aligned}
&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\end{aligned}
\qquad\text{\small and}\qquad
\begin{aligned}
&amp;
\mathrm{P}(X_5 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_{11}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_{37}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_5 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_{11}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_{37}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_5 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_{11}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_{37}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_5 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_{11}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_{37}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_5 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_{11}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_{37}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_5 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_{11}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_{37}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\end{aligned}
\]</span></p>
<p>and also</p>
<p><span class="math display">\[
\begin{aligned}
&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{170,51,119}d}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{170,51,119}d},\ X_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{170,51,119}d},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c},\ X_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b},\ X_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;\dotso
\end{aligned}
\]</span></p>
<p>and so on, no matter how many and which quantities we take, and no matter what the values <span style="display:inline-block;"><span class="math inline">\({\color[RGB]{34,136,51}a},{\color[RGB]{102,204,238}b},{\color[RGB]{204,187,68}c},{\color[RGB]{170,51,119}d}\dotsc\)</span></span> might be.</p>
<p><span class="small">Note that the commas just stand for the <code>and</code> operation, so thanks to the commutativity of Boolean algebra (<a href="probability_inference.html#sec-boolean">§&nbsp;<span>7.7.1</span></a>) we could equivalently write <span class="math display">\[
\begin{aligned}
&amp;
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\\[1ex] {}={}&amp;
\mathrm{P}(X_{\underbracket[0ex]{2}_{\uparrow}} \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_{\underbracket[0ex]{1}_{\uparrow}}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\end{aligned}
\]</span> and so on, where the quantities look swapped rather than the values.</span></p>
<p>This definition means that exchangeability is true for all marginal distributions</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa-solid fa-exclamation-circle" aria-label="exclamation-circle"></i>
</div>
</div>
<div class="callout-body-container callout-body">
<p>This does not mean that <em>all</em> probabilities need to be equal. For instance, if <span style="display:inline-block;"><span class="math inline">\({\color[RGB]{102,204,238}b}\ne{\color[RGB]{204,187,68}c}\)</span></span> then we can have the <em>in</em>equality</p>
<p><span class="math display">\[
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{102,204,238}b}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\mathrel{\boldsymbol{\ne}}
\mathrm{P}(X_1 \mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{34,136,51}a},\ X_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}{\color[RGB]{204,187,68}c}\nonscript\:\vert\nonscript\:\mathopen{} \mathsfit{I})
\]</span></p>
</div>
</div>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa-solid fa-user-edit" aria-label="user-edit"></i> Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Consider the following marginal probability distributions. For each, determine whether the joint probability they come from is <em>surely <strong>non</strong>-exchangeable</em>, and explain why:</p>
<ul>
<li><p><span class="math display">\[\begin{aligned}
&amp;\mathrm{P}(X_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}3,\  X_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}5) = 0.15
\\
&amp;\mathrm{P}(X_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}5,\  X_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}3) = 0.15
\\
&amp;\mathrm{P}(X_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}7,\  X_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}3) = 0.25
\\
&amp;\mathrm{P}(X_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}3,\  X_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}7) = 0.25
\end{aligned}
\]</span></p></li>
<li><p><span class="math display">\[\begin{aligned}
&amp;\mathrm{P}(Y_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}3,\  Y_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}5) = 0.07
\\
&amp;\mathrm{P}(Y_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}5,\  Y_4\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}3) = 0.07
\\
&amp;\mathrm{P}(Y_9\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}3,\  Y_{21}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}5) = 0.4
\\
&amp;\mathrm{P}(Y_9\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}5,\  Y_{21}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}3) = 0.4
\end{aligned}
\]</span></p></li>
<li><p><span class="math display">\[\begin{aligned}
&amp;\mathrm{P}(Z_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small high},\  Z_7\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small low},\  Z_{20}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small high}) = 0.11
\\
&amp;\mathrm{P}(Z_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small high},\  Z_7\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small high},\  Z_{20}\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small low}) = 0.35
\\
&amp;\mathrm{P}(Z_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small low},\  Z_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small low},\  Z_9\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small high}) = 0
\\
&amp;\mathrm{P}(Z_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small high},\  Z_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small low},\  Z_9\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}\text{\small low}) = 0
\end{aligned}
\]</span></p></li>
<li><p><span class="math display">\[\begin{aligned}
&amp;\mathrm{P}(U_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}6.4,\  U_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}8.7,\  U_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}-0.3) = 0.1
\\
&amp;\mathrm{P}(U_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}1.7,\  U_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}0.5,\  U_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}-0.3) = 0.1
\\
&amp;\mathrm{P}(U_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}-0.3,\  U_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}6.4,\  U_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}0.5) = 0.01
\\
&amp;\mathrm{P}(U_1\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}-0.3,\  U_2\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}1.7,\  U_3\mathord{\mkern 1.5mu\textrm{\small=}\mkern 1.5mu}0.5) = 0.4
\end{aligned}
\]</span></p></li>
</ul>
<p>Note that we can’t say that a probability distribution is exchangeable unless we’re given <em>all</em> its probabilities, for all combinations of quantities and values.</p>
</div>
</div>
<p>In the case of the inference problem about the fund value, the exchanged inference seems much easier. We expect known fund values closer to the unknown one to be more informative. In the case of the inference problem about the failure status, the exchanged inference might be slightly easier, but still roughly on the same level of difficulty and the original one.</p>
<p><br>
</p>
<p>An inference which remains basically the same if a quantity in the <em>proposal</em> is exchanged with a quantity in the <em>conditional</em> is called <span class="blue"><strong>exchangeable</strong></span>.</p>
<p>Our focus, however, is not on the <em>whys</em> of this intuition, but on the consequences that it has for inference and probability calculations.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./statistics.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Statistics</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./making_decisions.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Making decisions</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>