<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ADA511: Data science and data-driven engineering - 5&nbsp; Truth inference</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./probability_inference.html" rel="next">
<link href="./inference.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="ada511styles.css">
</head>

<body class="nav-sidebar docked slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./truth_inference.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Truth inference</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">ADA511: <br>Data science and data-driven engineering</a> 
        <div class="sidebar-tools-main">
    <a href="./ADA511---br-Data-science-and-data-driven-engineering.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./framework.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Framework</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./first_building_blocks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">First building blocks</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Inference</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./truth_inference.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Truth inference</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Probability inference</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_information.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data and information</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Allocation of uncertainty among possible data values: probability distributions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./making_decisions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Making decisions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference_exchangeability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">The most general inference problem</span></span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#building-blocks" id="toc-building-blocks" class="nav-link active" data-scroll-target="#building-blocks"><span class="header-section-number">5.1</span> Building blocks</a>
  <ul class="collapse">
  <li><a href="#analysis-of-the-problem" id="toc-analysis-of-the-problem" class="nav-link" data-scroll-target="#analysis-of-the-problem">Analysis of the problem</a></li>
  <li><a href="#data-assumptions-desired-conclusions" id="toc-data-assumptions-desired-conclusions" class="nav-link" data-scroll-target="#data-assumptions-desired-conclusions">Data, assumptions, desired conclusions</a></li>
  </ul></li>
  <li><a href="#background-information-and-conditional" id="toc-background-information-and-conditional" class="nav-link" data-scroll-target="#background-information-and-conditional"><span class="header-section-number">5.2</span> Background information and conditional</a></li>
  <li><a href="#truth-inference-rules" id="toc-truth-inference-rules" class="nav-link" data-scroll-target="#truth-inference-rules"><span class="header-section-number">5.3</span> Truth-inference rules</a></li>
  <li><a href="#logical-ai-agents-and-their-limitations" id="toc-logical-ai-agents-and-their-limitations" class="nav-link" data-scroll-target="#logical-ai-agents-and-their-limitations"><span class="header-section-number">5.4</span> Logical AI agents and their limitations</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-truth-inference" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Truth inference</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="hidden">

</div>
<section id="building-blocks" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="building-blocks"><span class="header-section-number">5.1</span> Building blocks</h2>
<p>Consider the following trivial problem. An inspector examines an electronic component out of a production line. The information available to the inspector is the following:</p>
<ul>
<li><p>The component can either come from the production line in Oslo, or from the one in Rome.</p></li>
<li><p>If the component is defective, it cannot come from Oslo.</p></li>
<li><p>The component is found to be defective.</p></li>
</ul>
<p>The question is: from which production line does the component come from?</p>
<p>The answer is obvious: from the Rome line. But how could we draw this obvious and sure inference? Which rules did we follow? Did we make any hidden assumptions, or use information that wasn’t explicitly mentioned?</p>
<p>Logic is the huge field that formalizes and makes rigorous the rules that a rational person or an artificial intelligence should use in drawing sure inferences. We’ll get a glimpse of it here, as a trampoline for jumping towards the more general inferences that we need in data-driven engineering problems.</p>
<section id="analysis-of-the-problem" class="level3">
<h3 class="anchored" data-anchor-id="analysis-of-the-problem">Analysis of the problem</h3>
<p>Let’s write down the basic sentences that constitute our data and the inferences we want to draw. We identify three basic sentences, which we can represent by these symbols:</p>
<ul>
<li><p><span class="math inline">\(o \coloneqq \textsf{\small`The component comes from the Oslo line'}\)</span></p></li>
<li><p><span class="math inline">\(r \coloneqq \textsf{\small`The component comes from the Rome line'}\)</span></p></li>
<li><p><span class="math inline">\(d \coloneqq \textsf{\small`The component is defective'}\)</span></p></li>
</ul>
<p>Obviously the inspector possesses even more information which is implicitly understood. It’s clear, for instance, that the component cannot come from both Oslo and Rome. Let’s denote this information with</p>
<ul>
<li><span class="math inline">\(I \coloneqq{}\)</span>(a long collection of sentences explaining all other implicitly understood information).<br>
</li>
</ul>
<p>With the sentences above we can express more complex details and hypotheses appearing in the inspector’s problem, in particular:</p>
<ul>
<li><p><span class="math inline">\(o \lor r = \textsf{\small`The component comes from either the Oslo line or the Rome line'}\)</span></p></li>
<li><p><span class="math inline">\(\lnot(o \land r) = \textsf{\small`The component cannot come from both the Oslo and the Rome lines'}\)</span></p></li>
<li><p>$ o $</p></li>
</ul>
</section>
<section id="data-assumptions-desired-conclusions" class="level3">
<h3 class="anchored" data-anchor-id="data-assumptions-desired-conclusions">Data, assumptions, desired conclusions</h3>
<p>The inspector knows for certain the following facts:</p>
<ul>
<li><p><span class="math inline">\(o \lor r\)</span>, <span class="math inline">\(\textsf{\small`The component comes from either the Oslo line or the Rome line'}\)</span></p></li>
<li><p><span class="math inline">\(\lnot(o \land r)\)</span>, <span class="math inline">\(\textsf{\small`The component cannot come from both the Oslo and the Rome lines'}\)</span></p></li>
<li><p><span class="math inline">\(d\)</span>, <span class="math inline">\(\textsf{\small`The component is defective'}\)</span></p></li>
<li><p><span class="math inline">\(I\)</span>, all remaining implicit information</p></li>
</ul>
<p>We <code>and</code> them all together: <span class="math display">\[
d \land (o \lor r) \land \lnot (o \land r) \land I \ .
\]</span></p>
<p>The inspector knows, moreover, this hypothetical consequence:</p>
<ul>
<li><p><span class="math inline">\(\lnot o \nonscript\:\vert\nonscript\:\mathopen{} d \land (o \lor r) \land \lnot (o \land r) \land I\)</span>, if the component is defective, it cannot come from the Oslo production line.</p></li>
<li></li>
</ul>
</section>
</section>
<section id="background-information-and-conditional" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="background-information-and-conditional"><span class="header-section-number">5.2</span> Background information and conditional</h2>
<!-- From this last remark we see that the sentence $\pr{The umbrella is either blue or red}$ does not really correspond to $b \lor r$, because the latter formula includes the possibility that the umbrella could be *both* fully blue *and* fully red. But we are implicitly assuming that this cannot happen; it's physically impossible. We have thus discovered that there is another piece of data hidden in our inference: the umbrella cannot be both blue and red. Convince yourself that we can write such hidden data like this: -->
<!-- $$ -->
<!-- \lnot(b \land r) = \pr{The umbrella cannot be both blue and red}\ . -->
<!-- $$ -->
<!-- \ -->
<p><br>
</p>
</section>
<section id="truth-inference-rules" class="level2 page-columns page-full" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="truth-inference-rules"><span class="header-section-number">5.3</span> Truth-inference rules</h2>
<p>Deduction systems in formal logic give us a set of rules for making correct inferences, that is, for correctly determining whether the conclusions of interest are true or false. These rules are represented in a <a href="https://plato.stanford.edu/archives/spr2023/entries/natural-deduction">wide variety of ways</a>, as steps leading from one conclusion to another one. The picture here on the margin, for instance, shows how a proof of our inference would look like, using the so-called sequent calculus.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="umbrella_inference_sequent.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">The bottom formula is our conclusion; the formulae above it represent steps in the proof. Each line denotes the application of an inference rule. The two formulae with no line above are our two assumptions.</figcaption>
</figure>
</div>
</div></div><p><br>
</p>
<p>We can compactly encode all inference rules in the following way. First, represent <code>true</code> by the number <code>1</code>, and <code>false</code> by <code>0</code>. Second, symbolically write that conclusion <span class="math inline">\(C\)</span> is <code>true</code>, given assumptions <span class="math inline">\(A\)</span>, as follows: <span class="math display">\[
\mathrm{T}(C \nonscript\:\vert\nonscript\:\mathopen{} A) = 1 \ .
\]</span> or with <code>0</code> if it’s <code>false</code>.</p>
<p>The rules of truth inference are then encoded by the following equations, which must always hold for any sentences <span class="math inline">\(A,B,C\)</span>, no matter whether they are basic or complex:</p>
<div class="column-page-inset-right" style="color:#228833">
<div class="border">
<dl>
<dt>Rule for “not”:</dt>
<dd>
<span id="eq-t-not"><span class="math display">\[\mathrm{T}(\lnot A \nonscript\:\vert\nonscript\:\mathopen{} B)
+ \mathrm{T}(A \nonscript\:\vert\nonscript\:\mathopen{} B)
= 1 \tag{5.1}\]</span></span>
</dd>
<dt>Rule for “and”:</dt>
<dd>
<span id="eq-t-and"><span class="math display">\[
\mathrm{T}(A \land B \nonscript\:\vert\nonscript\:\mathopen{} C)
= \mathrm{T}(A \nonscript\:\vert\nonscript\:\mathopen{} B \land C) \cdot
\mathrm{T}(B \nonscript\:\vert\nonscript\:\mathopen{} C)
= \mathrm{T}(B \nonscript\:\vert\nonscript\:\mathopen{} A \land C) \cdot
\mathrm{T}(A \nonscript\:\vert\nonscript\:\mathopen{} C)
\tag{5.2}\]</span></span>
</dd>
<dt>Rule for “or”:</dt>
<dd>
<span id="eq-t-or"><span class="math display">\[\mathrm{T}(A \lor B \nonscript\:\vert\nonscript\:\mathopen{} C)
= \mathrm{T}(A \nonscript\:\vert\nonscript\:\mathopen{} C) +
\mathrm{T}(B \nonscript\:\vert\nonscript\:\mathopen{} C)
- \mathrm{T}(A \land B \nonscript\:\vert\nonscript\:\mathopen{} C)
\tag{5.3}\]</span></span>
</dd>
<dt>Rule of self-consistency:</dt>
<dd>
<span id="eq-t-unity"><span class="math display">\[\mathrm{T}(A \nonscript\:\vert\nonscript\:\mathopen{} A \land C)
= 1
\tag{5.4}\]</span></span>
</dd>
</dl>
</div>
</div>
<p><br>
</p>
<p>Let’s see how the inference rule (<span class="quarto-unresolved-ref">?eq-example-rule</span>), for example, is encoded in these equations. The rule starts with saying that <span class="math inline">\(a \land b\)</span> is <code>true</code> according to <span class="math inline">\(D\)</span>. This means that <span class="math inline">\(\mathrm{T}(a \land b \nonscript\:\vert\nonscript\:\mathopen{} D)=1\)</span>. But, by rule (<a href="#eq-t-and"><span>5.2</span></a>), we must then have <span class="math inline">\(\mathrm{T}(b \nonscript\:\vert\nonscript\:\mathopen{} a \land D) \cdot \mathrm{T}(a \nonscript\:\vert\nonscript\:\mathopen{} D) = 1\)</span>. This can only happen if both <span class="math inline">\(\mathrm{T}(b \nonscript\:\vert\nonscript\:\mathopen{} a \land D)\)</span> and <span class="math inline">\(\mathrm{T}(a \nonscript\:\vert\nonscript\:\mathopen{} D)\)</span> are equal to <span class="math inline">\(1\)</span>. So we can conclude that <span class="math inline">\(\mathrm{T}(a \nonscript\:\vert\nonscript\:\mathopen{} D)=1\)</span>, which is exactly the conclusion under the line in rule (<span class="quarto-unresolved-ref">?eq-example-rule</span>).</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa-solid fa-pen" aria-label="pen"></i> Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Try to prove our initial inference</p>
<p><span class="math display">\[
\frac{
(b \lor r) \land \lnot (b \land r) \nonscript\:\vert\nonscript\:\mathopen{} D
\qquad
\lnot r \nonscript\:\vert\nonscript\:\mathopen{} D
}{
b\nonscript\:\vert\nonscript\:\mathopen{} D
}
\]</span></p>
<p>using the basic rules (<a href="#eq-t-not"><span>5.1</span></a>, <a href="#eq-t-and"><span>5.2</span></a>, <a href="#eq-t-or"><span>5.3</span></a>, <a href="#eq-t-unity"><span>5.4</span></a>). Remember that you can use each rule as many times as you like, and that there is not only one way of constructing a proof.</p>
</div>
</div>
</section>
<section id="logical-ai-agents-and-their-limitations" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="logical-ai-agents-and-their-limitations"><span class="header-section-number">5.4</span> Logical AI agents and their limitations</h2>
<p>The basic rules above are also the rules that a logical artificial-intelligent agent should follow.</p>
<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa-solid fa-book-open" aria-label="book-open"></i> Reading
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://hvl.instructure.com/courses/25074/modules/items/660089">Ch.&nbsp;7 in <em>Artificial Intelligence</em></a></p>
</div>
</div>
<p>Many – if not most – inference problems that a data engineer must face are, however, of the <em>uncertain</em> kind: it is not possible to surely infer the truth of some data, and the truth of some initial data may not be known either. In the next chapter we shall see how to generalize the logic rules to uncertain situations.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<i class="fa-solid fa-rocket" aria-label="rocket"></i> For the extra curious
</div>
</div>
<div class="callout-body-container callout-body">
<p>Our cursory visit of formal logic only showed a microscopic part of this vast field. The study of logic rules continues still today, with many exciting developments and applications. Feel free take a look at <a href="https://hvl.instructure.com/courses/25074/modules/items/661036"><em>Logic in Computer Science</em></a>, <a href="https://hvl.instructure.com/courses/25074/modules/items/661146"><em>Mathematical Logic for Computer Science</em></a>, <a href="https://plato.stanford.edu/archives/spr2023/entries/natural-deduction">Natural Deduction Systems in Logic</a></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./inference.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Inference</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./probability_inference.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Probability inference</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>